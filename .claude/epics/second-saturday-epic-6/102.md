---
name: Add notification schema tables and indexes
status: in-progress
created: 2026-02-22T05:54:13Z
updated: 2026-02-22T06:00:21Z
github: https://github.com/SecondSaturday/second-saturday/issues/102
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add notification schema tables and indexes

## Description
Add new tables and fields to the Convex schema for notification support. This includes `notificationPreferences`, `adminReminders` tables, and a `oneSignalPlayerId` field on the `users` table.

## Acceptance Criteria
- [ ] `notificationPreferences` table added with fields: userId, submissionReminders (bool, default true), newsletterReady (bool, default true), createdAt, updatedAt
- [ ] `adminReminders` table added with fields: circleId, adminUserId, targetUserId (optional), cycleId, sentAt
- [ ] Index `by_circle_cycle` on adminReminders for counting reminders per cycle
- [ ] `oneSignalPlayerId` field added to users table (optional string)
- [ ] Index on notificationPreferences by userId for fast lookup
- [ ] Schema validates correctly with `npx convex dev`

## Technical Details
- File: `convex/schema.ts`
- Follow existing table definition patterns in schema.ts
- Use Convex v.optional() for oneSignalPlayerId and targetUserId
- Add appropriate indexes for query performance

## Dependencies
- [ ] None (foundational task)

## Effort Estimate
- Size: S
- Hours: 2
- Parallel: true
