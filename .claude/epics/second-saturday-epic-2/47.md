---
name: Prompt Configuration
status: closed
created: 2026-02-09T03:56:28Z
updated: 2026-02-09T04:09:38Z
github: https://github.com/SecondSaturday/second-saturday/issues/47
depends_on: [44]
parallel: true
conflicts_with: []
---

# Task: Prompt Configuration

## Description

Build the prompt configuration UI where admins can select prompts from a library, write custom prompts, and reorder prompts using drag-and-drop. Supports 1-8 active prompts per circle.

## Acceptance Criteria

- [x] Prompt configuration accessible from circle settings or after circle creation
- [x] Display 4 default prompts pre-selected for new circles
- [x] Prompt library shows suggested prompts organized by category (reflection, fun, gratitude, deep)
- [x] User can select/deselect prompts from library
- [x] User can write custom prompts (max 200 chars)
- [x] User can delete prompts (minimum 1 must remain)
- [x] User can reorder prompts via drag-and-drop
- [x] Drag-and-drop works on both mobile (touch) and desktop (mouse)
- [x] Support 1-8 active prompts per circle
- [x] Changes saved to Convex when user confirms
- [x] Validation: prompt text max 200 chars, at least 1 prompt required
- [x] Visual feedback during drag operation

## Technical Details

### Components to Build

```
src/components/prompts/
├── PromptSelector.tsx      # Main prompt configuration UI
├── PromptLibrary.tsx       # Suggested prompts by category
├── PromptReorder.tsx       # Drag-and-drop list using dnd-kit
├── CustomPromptInput.tsx   # Input for custom prompts
└── PromptItem.tsx          # Single prompt with drag handle, delete
```

### dnd-kit Setup

```typescript
import {
  DndContext,
  closestCenter,
  KeyboardSensor,
  PointerSensor,
  useSensor,
  useSensors,
} from '@dnd-kit/core';
import {
  arrayMove,
  SortableContext,
  sortableKeyboardCoordinates,
  verticalListSortingStrategy,
} from '@dnd-kit/sortable';
```

### Prompt Library Data

Store in a constants file:
```typescript
export const PROMPT_LIBRARY = {
  reflection: [
    "What did you do this month?",
    "What's something you learned recently?",
  ],
  fun: [
    "What are you listening to?",
    "Best meal you had this month?",
  ],
  gratitude: [
    "One Good Thing",
    "Who made your month better?",
  ],
  deep: [
    "On Your Mind",
    "What are you looking forward to?",
  ],
};
```

### Convex Integration

- Use `updatePrompts` mutation to batch save changes
- Local state for drag-and-drop, sync to Convex on save

## Dependencies

- [x] Task 001 (Convex Backend) complete
- [x] npm install @dnd-kit/core @dnd-kit/sortable

## Effort Estimate

- Size: M
- Hours: 3-4
- Parallel: true (can run alongside Tasks 45, 46, 005)

## Definition of Done

- [x] Library shows prompts by category
- [x] Users can select/deselect from library
- [x] Custom prompt input works with validation
- [x] Drag-and-drop reorders prompts smoothly
- [x] Touch drag works on mobile
- [x] Changes persist to Convex
- [x] Minimum 1 / maximum 8 prompts enforced
- [x] Accessible (keyboard navigation for drag-and-drop)
