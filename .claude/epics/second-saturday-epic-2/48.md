---
name: Circle Settings
status: closed
created: 2026-02-09T03:56:28Z
updated: 2026-02-09T04:09:38Z
github: https://github.com/SecondSaturday/second-saturday/issues/48
depends_on: [44]
parallel: true
conflicts_with: []
---

# Task: Circle Settings

## Description

Build the circle settings screen where admins can edit circle details (name, images), view circle info (creation date, issue count), and regenerate the invite link with appropriate warnings.

## Acceptance Criteria

- [x] Settings accessible from circle detail page (admin only)
- [x] Edit circle name with same validation as creation (3-50 chars)
- [x] Edit/replace circle icon image
- [x] Edit/replace circle cover image
- [x] View circle creation date
- [x] View issue count (number of newsletters sent)
- [x] Regenerate invite link button with warning modal
- [x] Warning explains old links will stop working
- [x] Confirm/cancel on regenerate
- [x] Copy invite link to clipboard with context ("Jordan invited you to College Friends - [link]")
- [x] Success toast when link copied
- [x] Changes saved immediately (optimistic UI)
- [x] Non-admins cannot access settings
- [x] 3-member minimum warning shows if circle has <3 members

## Technical Details

### Components to Build

```
src/components/circles/
├── CircleSettings.tsx         # Main settings screen
├── CircleInfoSection.tsx      # Creation date, issue count
├── InviteLinkSection.tsx      # Copy link, regenerate button
└── RegenerateWarningModal.tsx # Confirmation dialog
```

### Page Route

- `src/app/(dashboard)/circles/[id]/settings/page.tsx`

### Invite Link Format

```typescript
const inviteLink = `${window.location.origin}/invite/${circle.inviteCode}`;
const shareText = `${userName} invited you to ${circle.name} - ${inviteLink}`;
```

### Copy to Clipboard

```typescript
await navigator.clipboard.writeText(shareText);
toast.success('Invite link copied!');
```

### Convex Integration

- Use `updateCircle` mutation for edits
- Use `regenerateInviteCode` mutation for new invite code
- Use `useQuery` to get circle details

### Analytics Events

- `circle_updated` (field: name/cover/icon)
- `invite_link_generated` (on regenerate)
- `invite_link_copied`

## Dependencies

- [x] Task 001 (Convex Backend) complete
- [x] Task 003 (ImageUpload component can be reused)

## Effort Estimate

- Size: S
- Hours: 2-3
- Parallel: true (can run alongside Tasks 45, 46, 004)

## Definition of Done

- [x] Settings page renders for admin users
- [x] Non-admins redirected or shown error
- [x] Name and image edits work correctly
- [x] Circle info displays accurately
- [x] Regenerate invite shows warning and works
- [x] Copy to clipboard includes context
- [x] 3-member warning displays when applicable
- [x] Analytics events fire correctly
- [x] Optimistic updates provide good UX
