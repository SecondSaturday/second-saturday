---
name: Add auth to getVideosByCircle
status: open
created: 2026-02-25T00:11:33Z
updated: 2026-02-25T00:17:22Z
github: https://github.com/SecondSaturday/second-saturday/issues/172
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add auth to getVideosByCircle

## Description

Add authentication and circle membership checks to `getVideosByCircle` in `convex/videos.ts` — missed during Epic 1 security hardening. Follow the existing `getAuthUser` + `requireMembership` pattern already in the file.

## Acceptance Criteria

- [ ] `getVideosByCircle` calls `getAuthUser(ctx)` at top of handler
- [ ] Verifies caller is a member of the circle via `requireMembership(ctx, user._id, args.circleId)`
- [ ] Unauthenticated calls throw "Not authenticated"
- [ ] Non-member calls throw "Not a member of this circle"

## Technical Details

- `convex/videos.ts:184-193` — `getVideosByCircle` is a public query with no auth
- `getAuthUser` and `requireMembership` helpers already exist in the same file (added in Epic 1)
- Add 2 lines at the top of the handler:
  ```
  const user = await getAuthUser(ctx)
  await requireMembership(ctx, user._id, args.circleId)
  ```

### Files affected
- `convex/videos.ts`

## Dependencies
- [ ] None

## Effort Estimate
- Size: XS
- Parallel: true

## Definition of Done
- [ ] Auth check added
- [ ] Existing tests pass
