---
name: Settings Details tab polish
status: open
created: 2026-02-25T00:11:33Z
updated: 2026-02-25T00:17:22Z
github: https://github.com/SecondSaturday/second-saturday/issues/176
depends_on: []
parallel: true
conflicts_with: [177]
---

# Task: Settings Details tab polish

## Description

Polish the Settings Details tab: integrate ProfileHeaderImageLayout (edit mode), fix cover image crop to 3:1 aspect ratio, redesign stat tiles as 3 separate squares, and clean up the leave button section.

## Acceptance Criteria

- [ ] ProfileHeaderImageLayout (edit mode) replaces two stacked ImageUpload components in Details tab
- [ ] Cover image crop uses 3:1 aspect ratio, icon uses 1:1
- [ ] 3 separate stat tiles: Members, Issues Sent, Created (month-year only)
- [ ] Stat tiles: large bold number on top, muted label below
- [ ] "Issues Sent" in title case
- [ ] Created shows "Feb 2026" (no day)
- [ ] "Danger Zone" heading removed
- [ ] Full-width destructive "Leave this circle" button replaces text link

## Technical Details

### ProfileHeaderImageLayout integration (FR6 + PL3)
- In `CircleSettings.tsx` Details tab, replace the two `ImageUpload` components with `ProfileHeaderImageLayout` in edit mode
- PL3 resolution: `ProfileHeaderImageLayout` accepts `onCoverUpload(file: File)` / `onIconUpload(file: File)` but `CircleSettings` needs `onUpload(storageId)`. Wrap at the call site: handle file → upload to Convex storage → pass storageId to `updateCircle`
- The existing `handleImageUpload` function takes a storageId and calls `updateCircle`

### Cover crop 3:1 (FR7)
- `src/components/circles/ImageCropModal.tsx` — change hardcoded `aspect={1}` to accept `aspect` prop
- `src/components/circles/ImageUpload.tsx` — pass `shape` through to determine aspect: `shape === 'rectangle' ? 3 : 1`

### Stat tiles (FR8)
- Replace single bordered card with 3 separate tiles
- Order: Members, Issues Sent, Created
- Each tile: `bg-card rounded-lg p-4 text-center`, bold number, muted label
- Created format: `toLocaleDateString('en-US', { month: 'short', year: 'numeric' })`

### Leave button (FR9)
- Remove "Danger Zone" `<Label>` heading
- Replace text link with `<Button variant="destructive" className="w-full">Leave this circle</Button>`

### Files affected
- `src/components/CircleSettings.tsx` (Details tab section)
- `src/components/circles/ImageCropModal.tsx` (aspect prop)
- `src/components/circles/ImageUpload.tsx` (pass shape to crop modal)

## Dependencies
- [ ] None — can start immediately
- [ ] Design input: reference screenshot for stat tiles

## Effort Estimate
- Size: M
- Parallel: true

## Definition of Done
- [ ] ProfileHeaderImageLayout renders in edit mode
- [ ] Cover crops at 3:1
- [ ] Stat tiles redesigned
- [ ] Leave button is full-width destructive
- [ ] Existing tests pass
