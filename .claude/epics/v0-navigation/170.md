---
name: Circle Settings 4-tab refactor
status: open
created: 2026-02-24T18:49:03Z
updated: 2026-02-24T18:53:16Z
github: https://github.com/SecondSaturday/second-saturday/issues/170
depends_on: [166]
parallel: false
conflicts_with: []
---

# Task: Circle Settings 4-tab refactor

## Description

Restructure CircleSettings from a flat scrollable page into a 4-tab layout using shadcn Tabs. Tabs: Details, Prompts, Members, Status (admin-only). Embed PromptsEditor, member list, and AdminSubmissionDashboard into their respective tabs. Remove the standalone `/members` page.

## Acceptance Criteria

- [ ] CircleSettings renders 4 tabs: Details, Prompts, Members, Status
- [ ] "Status" tab only visible to circle admins (`membership.role === 'admin'`)
- [ ] Non-admin users see 3 tabs (Details, Prompts, Members)
- [ ] Stats tiles (member count, issues sent, created date) rendered above tab bar, always visible
- [ ] Details tab: circle name, images (using ProfileHeaderImageLayout if available, else current layout), invite link, leave button
- [ ] Prompts tab: embeds `PromptsEditor` component in `settings` mode
- [ ] Members tab: embeds member list with admin controls (from current `/members` page)
- [ ] Status tab: embeds `AdminSubmissionDashboard` component
- [ ] "Configure Prompts" nav row removed from Details tab (FR9)
- [ ] Standalone `/members` page deleted or redirected (FR10)
- [ ] Uses shadcn `Tabs` component with `"line"` variant

## Technical Details

### Major refactor of `src/components/CircleSettings.tsx` (315 lines)
Current flat layout becomes tabbed:

```tsx
<Tabs defaultValue="details">
  <TabsList variant="line">
    <TabsTrigger value="details">Details</TabsTrigger>
    <TabsTrigger value="prompts">Prompts</TabsTrigger>
    <TabsTrigger value="members">Members</TabsTrigger>
    {isAdmin && <TabsTrigger value="status">Status</TabsTrigger>}
  </TabsList>
  <TabsContent value="details">...</TabsContent>
  <TabsContent value="prompts"><PromptsEditor circleId={circleId} mode="settings" /></TabsContent>
  <TabsContent value="members">...</TabsContent>
  {isAdmin && <TabsContent value="status"><AdminSubmissionDashboard circleId={circleId} /></TabsContent>}
</Tabs>
```

### Details tab content (from current CircleSettings)
- Circle name input
- Image uploads (cover + icon)
- Invite link with copy
- Leave circle section
- Save button
- Remove "Configure Prompts" row (FR9)

### Prompts tab
- Render `<PromptsEditor circleId={circleId} mode="settings" />`
- No additional wrapper needed

### Members tab
- Extract member list logic from `/members/page.tsx` (142 lines)
- Render sorted member list with avatars, roles, remove buttons
- Admin can remove members, cannot remove self
- RemoveMemberModal integration

### Status tab (admin only)
- Render `<AdminSubmissionDashboard circleId={circleId} />`
- Already a self-contained component (183 lines)

### Delete/orphan standalone members page
- `src/app/dashboard/circles/[circleId]/members/page.tsx` — delete after embedding in Members tab

### Files affected
- `src/components/CircleSettings.tsx` (major refactor — 315 lines)
- `src/app/dashboard/circles/[circleId]/settings/page.tsx` (may need updates)
- `src/app/dashboard/circles/[circleId]/members/page.tsx` (delete)

## Dependencies
- [ ] Task 166 (PromptsEditor extraction) — must complete first so Prompts tab can embed it

## Effort Estimate
- Size: L
- Parallel: false (depends on Task 166)
- Note: Largest task in the epic. Design gate — may need reference for tab structure.

## Definition of Done
- [ ] 4-tab layout renders correctly
- [ ] Admin sees 4 tabs, non-admin sees 3
- [ ] All tab content functional
- [ ] Members page deleted
- [ ] Configure Prompts row removed
- [ ] Existing tests pass
