---
name: Extract PromptsEditor shared component
status: open
created: 2026-02-24T18:49:03Z
updated: 2026-02-24T18:53:16Z
github: https://github.com/SecondSaturday/second-saturday/issues/166
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Extract PromptsEditor shared component

## Description

Extract the prompts editor UI and logic from the 290-line prompts page into a shared `PromptsEditor.tsx` component. The component will be reused in both the standalone prompts page (setup mode) and the Circle Settings Prompts tab (settings mode).

## Acceptance Criteria

- [ ] `src/components/PromptsEditor.tsx` created with all editor logic
- [ ] Component accepts props: `circleId`, `mode: 'setup' | 'settings'`, `onComplete?: () => void`
- [ ] Drag-and-drop reordering works identically to current behavior
- [ ] Add/remove/edit prompts works identically
- [ ] Prompt library with categories preserved
- [ ] `src/app/dashboard/circles/[circleId]/prompts/page.tsx` refactored to use `PromptsEditor`
- [ ] Prompts page remains functional for setup flow (setup=true query param)
- [ ] Validation: min 1, max 8 prompts, no duplicates, 200 char limit

## Technical Details

### Extraction from `src/app/dashboard/circles/[circleId]/prompts/page.tsx` (290 lines)
The page currently contains:
- `SortablePrompt` sub-component (drag handle + input + delete button)
- DndContext setup with pointer/keyboard sensors
- State management for prompts array
- Prompt library drawer
- Save handler with toast notifications
- Navigation logic (setup mode → setup-complete, edit mode → back to settings)

### PromptsEditor component props
```tsx
interface PromptsEditorProps {
  circleId: Id<'circles'>
  mode: 'setup' | 'settings'
  onComplete?: () => void  // called after successful save
}
```

### What stays in the page wrapper
- Route-level metadata
- Query param parsing (`setup=true`)
- Auth guard / loading state
- Passes `mode` and `circleId` to PromptsEditor

### Files affected
- `src/components/PromptsEditor.tsx` (new — ~200 lines)
- `src/app/dashboard/circles/[circleId]/prompts/page.tsx` (refactor — ~40 lines after extraction)

## Dependencies
- [ ] None — can start immediately. Must complete before Task 170 (settings tabs).

## Effort Estimate
- Size: M
- Parallel: true

## Definition of Done
- [ ] PromptsEditor component works in both modes
- [ ] Prompts page still functions for setup flow
- [ ] Drag-and-drop, add/remove, library all work
- [ ] Existing tests pass
