---
name: Add input validation for names
status: open
created: 2026-02-24T16:13:00Z
updated: 2026-02-24T16:18:16Z
github: https://github.com/SecondSaturday/second-saturday/issues/160
depends_on: []
parallel: true
conflicts_with: [159]
---

# Task: Add input validation for names

## Description

Add minimum-length validation for profile name and circle name fields to prevent saving empty or near-empty names.

## Acceptance Criteria

- [ ] C1: Profile name save in `settings/page.tsx` checks `name.trim().length < 1` and shows `toast.error('Name cannot be empty')` if invalid
- [ ] C2: Circle name in `CircleSettings.tsx` checks `name.trim().length < 3` (matching the create flow) and shows `toast.error('Name must be at least 3 characters')` if invalid
- [ ] Save operation is prevented (not called) when validation fails
- [ ] Validation runs client-side before the mutation call

## Technical Details

### C1: `src/app/dashboard/settings/page.tsx`
- In `handleSave` (lines 62-81): Add validation before the `updateProfile` call
  ```
  if (name !== null && name.trim().length < 1) {
    toast.error('Name cannot be empty')
    return
  }
  ```
- Early return prevents the mutation from firing

### C2: `src/components/CircleSettings.tsx`
- In the save handler (lines 96-121): Add validation before `updateCircle` call
  ```
  if (name.trim().length < 3) {
    toast.error('Name must be at least 3 characters')
    return
  }
  ```
- The create circle flow already enforces min 3 chars — this matches that constraint

### Files affected
- `src/app/dashboard/settings/page.tsx`
- `src/components/CircleSettings.tsx`

## Dependencies
- [ ] None — independent of all other tasks

## Effort Estimate
- Size: XS
- Parallel: true

## Definition of Done
- [ ] Both validation checks implemented
- [ ] Empty/short names cannot be saved
- [ ] Toast error shown with clear message
- [ ] Existing tests pass (`npm test`)
