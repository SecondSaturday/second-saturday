---
name: Implement Mux video integration and webhook handler
status: open
created: 2026-02-11T14:26:53Z
updated: 2026-02-11T14:34:25Z
github: https://github.com/SecondSaturday/second-saturday/issues/67
depends_on: [65]
parallel: true
conflicts_with: []
---

# Task: Implement Mux video integration and webhook handler

## Description
Set up complete Mux integration for video uploads, including the uploadVideoToMux Convex action, webhook handler for video processing events, and thumbnail generation. This provides the backend infrastructure for video hosting.

## Acceptance Criteria
- [ ] Mux SDK installed and configured
- [ ] uploadVideoToMux Convex action implemented
- [ ] Video upload returns Mux asset ID and playback ID
- [ ] Mux webhook endpoint created (video.asset.ready)
- [ ] Webhook handler updates media table with thumbnail URLs
- [ ] Webhook signature validation implemented
- [ ] Error handling for failed uploads
- [ ] Video metadata stored (duration, resolution)
- [ ] Integration tested end-to-end

## Technical Details
- Use Mux SDK for uploads and asset management
- Store Mux asset ID and playback ID in media table
- Webhook endpoint: `/api/webhooks/mux`
- Validate webhook signatures using Mux secret
- Extract thumbnail URL from video.asset.ready event
- Handle video processing failures gracefully
- Videos should be accessible via Mux player

## Dependencies
- [ ] Epic 0 (Mux account and credentials setup)
- [ ] Mux API credentials configured in environment
- [ ] Design approved (Task 001)

## Effort Estimate
- Size: M
- Hours: 10-14
- Parallel: true (can run parallel with Task 002)

## Definition of Done
- [ ] Mux SDK integrated
- [ ] Upload action tested with real videos
- [ ] Webhook handler tested with Mux test events
- [ ] Thumbnails generating correctly
- [ ] Error handling verified
- [ ] Integration tests passing
- [ ] Code reviewed and merged
